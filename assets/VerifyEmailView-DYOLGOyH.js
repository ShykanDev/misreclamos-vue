import{d as U,r as t,q as V,o as N,c as k,a as u,w as L,i as f,f as r,n as y,t as v,s as p,g as q,h as j,b as A,k as C,v as P,m as z,u as I}from"./index-BiswLOs5.js";import{g as S,_ as D,e as T,v as G,f as $}from"./MainLayout.vue_vue_type_script_setup_true_lang-BzXPOY4I.js";import{L as F}from"./LoaderA-CPBOpNFR.js";import{N as H}from"./notyf.es-BJmXWBOg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:1,class:"flex flex-col justify-center items-center p-6 mx-auto space-y-6 min-h-screen bg-gradient-to-br from-indigo-50 to-pink-50"},K={class:"p-8 space-y-6 w-full max-w-md bg-white rounded-3xl shadow-xl transition-all duration-300 hover:shadow-2xl"},Q={class:"text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600"},W={key:0,class:"p-4 text-center text-green-700 bg-green-50 rounded-xl animate-fade-down"},X={class:"font-medium"},Y={key:1,class:"p-4 text-center text-red-700 bg-red-50 rounded-xl animate-fade-up"},Z={class:"font-medium"},ee={key:2,class:"flex fixed inset-0 justify-center items-center px-4 bg-gradient-to-br from-rose-100 via-pink-50 to-white"},re={class:"w-full max-w-md"},oe={class:"p-8 bg-white rounded-2xl shadow-xl"},se={class:"space-y-4"},ue=U({__name:"VerifyEmailView",setup(te){const l=new H({position:{x:"center",y:"top"},duration:5e3,dismissible:!0}),o=t(!1),b=V(),s=b.query.mode,c=b.query.oobCode,w=S(),h=t(!1),E=t(!1),x=t(!1),a=t(!1),n=t(""),R=I(),_=async()=>{if(s!=="verifyEmail")throw a.value=!0,n.value='Invalid URL "Mode" parameter is not a valid value, does the URL have a valid "Mode" parameter?',new Error('URL has not a valid "Mode" parameter');if(!c)throw a.value=!0,n.value='Invalid URL "OOB" parameter is not a valid value, does the URL have a valid "OOB" parameter?',new Error('URL has not a valid "OOB" parameter');try{o.value=!0,await T(w,c),s==="verifyEmail"&&(h.value=!0),o.value=!1}catch(i){const e=i;console.log(e),a.value=!0,o.value=!1,n.value=e.code}},d=t(),m=t(),B=async()=>{try{const i=await G(w,c);return!0}catch(i){const e=i;return l.error(e.message),console.log(e),a.value=!0,o.value=!1,n.value=e.message,!1}},M=async()=>{if(!d.value){l.error("Por favor ingrese su nueva contraseña");return}if(d.value!==m.value){l.error("Las contraseñas no coinciden");return}try{o.value=!0,await $(w,c,d.value),E.value=!0,x.value=!0,d.value="",m.value="",l.success("Contraseña actualizada correctamente, redirigiendo a iniciar sesión..."),R.push("/login"),o.value=!1}catch(i){const e=i;l.error(e.message),console.log(e),a.value=!0,o.value=!1,x.value=!1,n.value=e.message}};return N(()=>{if(!s||!c){l.error('URL has not a valid "Mode" or "OOB" parameter'),a.value=!0,o.value=!1,n.value='URL has not a valid "Mode" or "OOB" parameter';return}s==="verifyEmail"?_():s==="resetPassword"&&B()}),(i,e)=>{const O=A("RouterLink");return u(),k(D,null,{main:L(()=>[o.value?(u(),k(F,{key:0,class:"flex fixed inset-0 z-40 justify-center items-center bg-black/50"})):(u(),f("div",J,[r("div",K,[r("h1",Q," Verificar "+v(p(s)==="verifyEmail"?"correo":"contraseña"),1),h.value?(u(),f("div",W,[e[3]||(e[3]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto mb-2 w-8 h-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),r("p",X,"¡"+v(p(s)==="verifyEmail"?"Correo":"Contraseña")+" verificado con éxito!",1),e[4]||(e[4]=r("p",{class:"mt-2 text-sm"},"Ahora puede iniciar sesión con su correo y contraseña.",-1)),e[5]||(e[5]=r("p",null,"¡Bienvenido a misreclamos.com!",-1)),q(O,{to:{name:"login"},class:"inline-flex items-center px-4 py-2 mt-4 text-white bg-indigo-600 rounded-lg transition-colors duration-200 hover:bg-indigo-700"},{default:L(()=>[...e[2]||(e[2]=[j(" Iniciar sesión",-1)])]),_:1})])):y("",!0),a.value?(u(),f("div",Y,[e[6]||(e[6]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto mb-2 w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),r("p",Z,"Error al verificar el "+v(p(s)==="verifyEmail"?"correo":"contraseña")+", código de error: "+v(n.value),1),e[7]||(e[7]=r("p",{class:"mt-2 text-sm"},"Por favor, verifique que los parámetros del enlace sean correctos.",-1))])):y("",!0),p(s)==="resetPassword"&&!x.value?(u(),f("section",ee,[r("div",re,[r("div",oe,[e[10]||(e[10]=r("h2",{class:"mb-2 text-2xl font-bold text-center text-rose-600"}," Actualizar contraseña ",-1)),e[11]||(e[11]=r("p",{class:"mb-6 text-center text-gray-500"}," Por favor ingrese su nueva contraseña ",-1)),r("form",se,[r("div",null,[e[8]||(e[8]=r("label",{for:"password",class:"block mb-1 text-sm font-medium text-gray-700"}," Nueva contraseña ",-1)),C(r("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>d.value=g),type:"password",id:"password",class:"px-4 py-2 w-full rounded-xl border border-gray-300 transition focus:ring-2 focus:ring-rose-400 focus:border-rose-400",placeholder:"••••••••",required:""},null,512),[[P,d.value]])]),r("div",null,[e[9]||(e[9]=r("label",{for:"confirmPassword",class:"block mb-1 text-sm font-medium text-gray-700"}," Confirmar contraseña ",-1)),C(r("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>m.value=g),type:"password",id:"confirmPassword",class:"px-4 py-2 w-full rounded-xl border border-gray-300 transition focus:ring-2 focus:ring-rose-400 focus:border-rose-400",placeholder:"••••••••",required:""},null,512),[[P,m.value]])]),r("button",{type:"submit",onClick:z(M,["prevent"]),class:"py-2.5 w-full font-semibold text-white bg-rose-500 rounded-xl shadow-md transition transform hover:bg-rose-600 hover:-translate-y-0.5"}," Guardar nueva contraseña ")])])])])):y("",!0)])]))]),_:1})}}});export{ue as default};
